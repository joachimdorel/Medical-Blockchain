<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}

  <div class="">
    <form action="{{ url_for('decode_datamatrix') }}" method="POST" enctype="multipart/form-data">
           <input type="file" name="file"/>
           <input type="submit" />
        </form>
  </div>

  <br>
  <form action="/batch_info" id="textform" method="post">
    <input type="text" name="batch_id" placeholder="Batch ID">
    <input type="submit" value="Send">
  </form>
  <br>

  <div>
    <p>Medicine : {{ med_id }}</p>
    <p>Current owner : {{ data.owner }}
  </div>

  <div style="margin:20px">
    {% for transaction in transactions %}
      {% if transaction.med_id|int == med_id|int %}
        {% if transaction.sender_id != transaction.recipient_id %}
          <div class="post_box">
            <div class="post_box-header ">
              <div class="name-header med_data">Medicine : {{transaction.med_id}}</div>
              <div class="name-header send_data">{{transaction.sender_id}} â†’ {{transaction.recipient_id}}</div>
              <div class="name-header status_data"> Status : {{ transaction.status }}</div>
              <div class="name-header time_data"> Send at <i>{{readable_time(transaction.timestamp)}}</i></div>
            </div>
          </div>
        {% else %}
          <div class="post_box">
            <div class="post_box-header ">
              <div class="name-header med_data">Medicine : {{transaction.med_id}}</div>
              <div class="name-header send_data">New medicine added from {{transaction.sender_id}}</div>
              <div class="name-header status_data"> Status : {{ transaction.status }}</div>
              <div class="name-header time_data"> Send at <i>{{readable_time(transaction.timestamp)}}</i></div>
            </div>
          </div>
        {% endif %}
      {% endif %}
    {% endfor %}

    <style>
      .post_box {
          background: #fff;
          padding: 20px 20px 20px 20px;
          margin-top: 10px;
          border-top: 1px solid #f0f0f0;
          border-radius: 5px;
      }
      .med_data {
          float: left;
          text-align:left;
          width:25%;
      }
      .send_data {
          float: left;
          text-align:center;
          width:25%;
      }
      .time_data {
          float: left;
          text-align:right;
          width:25%;
      }
      .status_data {
          float: left;
          text-align:right;
          width:25%;
      }
    </style>
  </div>

{% endblock %}
